<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Indisponibilités - Pizza Club</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 2rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee;
            flex-wrap: wrap;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .item-card {
            border: 2px solid #eee;
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .item-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .item-card.unavailable {
            background: #f5f5f5;
            border-color: #ccc;
            opacity: 0.7;
        }

        .item-card .item-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .item-card .item-id {
            font-size: 0.8rem;
            color: #999;
            margin-bottom: 0.5rem;
        }

        .item-card .item-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .item-card .status-available {
            background: #d4edda;
            color: #155724;
        }

        .item-card .status-unavailable {
            background: #f8d7da;
            color: #721c24;
        }

        .actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #eee;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
        }

        .alert {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .ingredient-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .ingredient-chip {
            padding: 0.75rem;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .ingredient-chip:hover {
            border-color: #667eea;
        }

        .ingredient-chip.unavailable {
            background: #f5f5f5;
            border-color: #ccc;
            opacity: 0.7;
        }

        .legend {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid #ddd;
        }

        .legend-box.available {
            background: white;
        }

        .legend-box.unavailable {
            background: #f5f5f5;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-cog"></i> Gestion des Indisponibilités</h1>
        <p class="subtitle">Cliquez sur un produit ou ingrédient pour le marquer comme indisponible</p>

        <div class="alert alert-info" id="infoAlert">
            <i class="fas fa-info-circle"></i> Cliquez sur "Générer le code" pour obtenir le code à copier dans data.js
        </div>

        <div class="alert alert-success" id="successAlert">
            <i class="fas fa-check-circle"></i> Code copié dans le presse-papier !
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-box available"></div>
                <span>Disponible (cliquer pour rendre indisponible)</span>
            </div>
            <div class="legend-item">
                <div class="legend-box unavailable"></div>
                <span>Indisponible (cliquer pour rendre disponible)</span>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('pizzas')">
                <i class="fas fa-pizza-slice"></i> Pizzas
            </button>
            <button class="tab" onclick="switchTab('pates')">
                <i class="fas fa-utensils"></i> Pâtes
            </button>
            <button class="tab" onclick="switchTab('salades')">
                <i class="fas fa-leaf"></i> Salades
            </button>
            <button class="tab" onclick="switchTab('buns')">
                <i class="fas fa-hamburger"></i> Buns
            </button>
            <button class="tab" onclick="switchTab('rolls')">
                <i class="fas fa-utensils"></i> Rolls
            </button>
            <button class="tab" onclick="switchTab('desserts')">
                <i class="fas fa-ice-cream"></i> Desserts
            </button>
            <button class="tab" onclick="switchTab('ingredients')">
                <i class="fas fa-carrot"></i> Ingrédients
            </button>
        </div>

        <div id="pizzas" class="tab-content active">
            <div class="items-grid" id="pizzas-grid"></div>
        </div>

        <div id="pates" class="tab-content">
            <div class="items-grid" id="pates-grid"></div>
        </div>

        <div id="salades" class="tab-content">
            <div class="items-grid" id="salades-grid"></div>
        </div>

        <div id="buns" class="tab-content">
            <div class="items-grid" id="buns-grid"></div>
        </div>

        <div id="rolls" class="tab-content">
            <div class="items-grid" id="rolls-grid"></div>
        </div>

        <div id="desserts" class="tab-content">
            <div class="items-grid" id="desserts-grid"></div>
        </div>

        <div id="ingredients" class="tab-content">
            <div class="ingredient-grid" id="ingredients-grid"></div>
        </div>

        <div class="actions">
            <button class="btn btn-success" onclick="generateCode()">
                <i class="fas fa-code"></i> Générer le code pour data.js
            </button>
            <button class="btn btn-primary" onclick="copyToClipboard()">
                <i class="fas fa-copy"></i> Copier dans le presse-papier
            </button>
        </div>

        <div id="generatedCode" style="display: none; margin-top: 2rem;">
            <h3>Code à copier dans data.js :</h3>
            <textarea id="codeOutput" style="width: 100%; min-height: 200px; padding: 1rem; border-radius: 8px; border: 2px solid #ddd; font-family: monospace; font-size: 0.9rem;"></textarea>
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        // État des indisponibilités
        let unavailableItems = {};
        let unavailableIngredients = {};

        // Charger les données existantes si disponibles
        if (typeof UNAVAILABLE_ITEMS !== 'undefined') {
            unavailableItems = {...UNAVAILABLE_ITEMS};
        }
        if (typeof UNAVAILABLE_INGREDIENTS !== 'undefined') {
            unavailableIngredients = {...UNAVAILABLE_INGREDIENTS};
        }

        // Liste des ingrédients
        const INGREDIENTS_LIST = {
            'champignons': 'Champignons',
            'olives': 'Olives',
            'poivrons': 'Poivrons',
            'oignons': 'Oignons',
            'tomates': 'Tomates',
            'pommesDeTerre': 'Pommes de terre',
            'mais': 'Maïs',
            'grosPiment': 'Gros piment',
            'fromage': 'Fromage',
            'chevre': 'Chèvre',
            'gorgonzola': 'Gorgonzola',
            'parmesan': 'Parmesan',
            'jambon': 'Jambon',
            'poulet': 'Poulet',
            'merguez': 'Merguez',
            'chorizo': 'Chorizo',
            'boeuf': 'Bœuf',
            'lardons': 'Lardons',
            'thon': 'Thon',
            'anchois': 'Anchois',
            'crevettes': 'Crevettes',
            'saumon': 'Saumon',
            'oeuf': 'Œuf',
            'miel': 'Miel'
        };

        // Initialiser l'interface
        function init() {
            renderItems('pizzas', PIZZAS_DATA, 'pizza');
            renderItems('pates', PATES_DATA, 'pate');
            renderItems('salades', SALADES_DATA, 'salade');
            renderItems('buns', BUNS_DATA, 'bun');
            renderItems('rolls', ROLLS_DATA, 'roll');
            renderItems('desserts', DESSERTS_DATA, 'dessert');
            renderIngredients();
        }

        function renderItems(gridId, data, type) {
            const grid = document.getElementById(`${gridId}-grid`);
            grid.innerHTML = '';

            data.forEach(item => {
                const key = `${type}-${item.id}`;
                const isUnavailable = unavailableItems[key] === true;

                const card = document.createElement('div');
                card.className = `item-card ${isUnavailable ? 'unavailable' : ''}`;
                card.onclick = () => toggleItem(key, card);
                card.innerHTML = `
                    <div class="item-name">${item.name}</div>
                    <div class="item-id">ID: ${item.id}</div>
                    <div class="item-status ${isUnavailable ? 'status-unavailable' : 'status-available'}">
                        <i class="fas ${isUnavailable ? 'fa-ban' : 'fa-check'}"></i>
                        ${isUnavailable ? 'Indisponible' : 'Disponible'}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function renderIngredients() {
            const grid = document.getElementById('ingredients-grid');
            grid.innerHTML = '';

            Object.entries(INGREDIENTS_LIST).forEach(([key, name]) => {
                const isUnavailable = unavailableIngredients[key] === true;

                const chip = document.createElement('div');
                chip.className = `ingredient-chip ${isUnavailable ? 'unavailable' : ''}`;
                chip.onclick = () => toggleIngredient(key, chip);
                chip.innerHTML = `
                    <div>${name}</div>
                    <div style="font-size: 0.8rem; margin-top: 0.25rem; color: #666;">
                        <i class="fas ${isUnavailable ? 'fa-ban' : 'fa-check'}"></i>
                        ${isUnavailable ? 'Indisponible' : 'Disponible'}
                    </div>
                `;
                grid.appendChild(chip);
            });
        }

        function toggleItem(key, card) {
            if (unavailableItems[key]) {
                delete unavailableItems[key];
                card.classList.remove('unavailable');
            } else {
                unavailableItems[key] = true;
                card.classList.add('unavailable');
            }
            updateCardStatus(card);
        }

        function toggleIngredient(key, chip) {
            if (unavailableIngredients[key]) {
                delete unavailableIngredients[key];
                chip.classList.remove('unavailable');
            } else {
                unavailableIngredients[key] = true;
                chip.classList.add('unavailable');
            }
            updateChipStatus(chip);
        }

        function updateCardStatus(card) {
            const statusDiv = card.querySelector('.item-status');
            const isUnavailable = card.classList.contains('unavailable');
            statusDiv.className = `item-status ${isUnavailable ? 'status-unavailable' : 'status-available'}`;
            statusDiv.innerHTML = `
                <i class="fas ${isUnavailable ? 'fa-ban' : 'fa-check'}"></i>
                ${isUnavailable ? 'Indisponible' : 'Disponible'}
            `;
        }

        function updateChipStatus(chip) {
            const isUnavailable = chip.classList.contains('unavailable');
            const statusDiv = chip.querySelector('div:last-child');
            statusDiv.innerHTML = `
                <i class="fas ${isUnavailable ? 'fa-ban' : 'fa-check'}"></i>
                ${isUnavailable ? 'Indisponible' : 'Disponible'}
            `;
        }

        function switchTab(tabName) {
            // Désactiver tous les onglets
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Activer l'onglet sélectionné
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function generateCode() {
            let code = '// ========================================\n';
            code += '// GESTION DES INDISPONIBILITÉS\n';
            code += '// ========================================\n';
            code += 'const UNAVAILABLE_ITEMS = {\n';
            code += '    // Produits actuellement indisponibles\n';

            const itemKeys = Object.keys(unavailableItems).filter(key => unavailableItems[key]);
            if (itemKeys.length > 0) {
                itemKeys.forEach(key => {
                    code += `    '${key}': true,\n`;
                });
            } else {
                code += '    // Aucun produit indisponible\n';
            }

            code += '};\n\n';
            code += 'const UNAVAILABLE_INGREDIENTS = {\n';
            code += '    // Ingrédients actuellement indisponibles\n';

            const ingredientKeys = Object.keys(unavailableIngredients).filter(key => unavailableIngredients[key]);
            if (ingredientKeys.length > 0) {
                ingredientKeys.forEach(key => {
                    code += `    '${key}': true,  // ${INGREDIENTS_LIST[key]}\n`;
                });
            } else {
                code += '    // Aucun ingrédient indisponible\n';
            }

            code += '};\n';

            document.getElementById('codeOutput').value = code;
            document.getElementById('generatedCode').style.display = 'block';
            
            // Scroll vers le code
            document.getElementById('generatedCode').scrollIntoView({ behavior: 'smooth' });
        }

        function copyToClipboard() {
            generateCode();
            const codeOutput = document.getElementById('codeOutput');
            codeOutput.select();
            document.execCommand('copy');

            const alert = document.getElementById('successAlert');
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        // Initialiser au chargement
        init();
    </script>
</body>
</html>
